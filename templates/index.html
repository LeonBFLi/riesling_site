<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>1206心灵休憩小客厅（毕业季版）</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script>
      window.initialVideos = {{ videos|tojson }};
    </script>
    <script defer src="{{ url_for('static', filename='js/app.js') }}"></script>
  </head>
  <body>
    <header class="hero">
      <div class="hero__content">
        <h1>1206心灵休憩小客厅（毕业季版）</h1>
        <p>
          在最忙的日子里也要记得按下暂停键。这里收藏了我们共同的光影、书写和轻声问候，
          轻轻播放就能回到彼此身边。容器保持轻盈，却装得下满满的温度。
        </p>
      </div>
    </header>

    <main class="main">
      <section class="card">
        <h2>🍇 温馨片段播放器</h2>
        {% if videos %}
        <label class="label" for="video-select">选择一个视频：</label>
        <select id="video-select" class="select">
          {% for video in videos %}
          <option value="{{ video }}">{{ video }}</option>
          {% endfor %}
        </select>
        <div class="video-wrapper">
          <video id="video-player" controls preload="metadata">
            <source />
            您的浏览器不支持播放此视频。
          </video>
        </div>
        <p class="hint">提示：使用 Docker 时，将宿主机的 /opt/video 挂载到容器中即可播放。</p>
        {% else %}
        <p class="empty">目前还没有可播放的视频。把文件放到 /opt/video 中再刷新试试吧！</p>
        {% endif %}
      </section>

      <section class="card card--timeline" aria-labelledby="timeline-heading">
        <h2 id="timeline-heading">🕰️ 心动时间册</h2>
        <p>
          像翻阅日记一样，从每一个时间戳里收好故事。点击时间点即可查看对应的图片或提醒，
          让我们一起回望这段旅程的沿途风景。
        </p>
        <div class="timeline">
          <nav class="timeline__nav" aria-label="旅程时序">
            <button type="button" class="timeline__item timeline__item--active" data-target="moment-2021-01">2021 年 1 月</button>
            <button type="button" class="timeline__item" data-target="moment-2021-06">2021 年 6 月</button>
            <button type="button" class="timeline__item" data-target="moment-2022-03">2022 年 3 月</button>
            <button type="button" class="timeline__item" data-target="moment-2023-12">2023 年 12 月 6 日</button>
            <button type="button" class="timeline__item" data-target="moment-2024-01">2024 年 1 月 31 日</button>
          </nav>
          <div class="timeline__panels">
            <article id="moment-2021-01" class="timeline__panel timeline__panel--active" aria-hidden="false">
              <figure class="timeline__figure">
                <img
                  src="{{ url_for('static', filename='img/timeline/2021-01-journey.svg') }}"
                  alt="2021年1月的蓝色日程页，记录着起步的愿望"
                />
                <figcaption>我们按下了第一颗日程上的星星，也按下了梦想的开场键。</figcaption>
              </figure>
            </article>

            <article id="moment-2021-06" class="timeline__panel" aria-hidden="true">
              <figure class="timeline__figure timeline__figure--grid">
                <img
                  src="{{ url_for('static', filename='img/timeline/2021-06-office-a.svg') }}"
                  alt="2021年6月在办公室窗边休憩的画面"
                />
                <img
                  src="{{ url_for('static', filename='img/timeline/2021-06-office-b.svg') }}"
                  alt="2021年6月在教室走廊准备课程的画面"
                />
                <figcaption>盛夏的玻璃窗映着光，我们在教室与办公室之间奔跑着长大。</figcaption>
              </figure>
            </article>

            <article id="moment-2022-03" class="timeline__panel" aria-hidden="true">
              <figure class="timeline__figure">
                <img
                  src="{{ url_for('static', filename='img/timeline/2022-03-teatime.svg') }}"
                  alt="2022年3月泡茶歇息的温柔瞬间"
                />
                <figcaption>三月的茶香和回甘，提醒我们在匆忙中也别忘了安静地照顾彼此。</figcaption>
              </figure>
            </article>

            <article id="moment-2023-12" class="timeline__panel" aria-hidden="true">
              <figure class="timeline__figure">
                <img
                  src="{{ url_for('static', filename='img/timeline/2023-12-video.svg') }}"
                  alt="2023年12月即将上线的视频占位图"
                />
                <figcaption>
                  40M 的毕业季影片已经在待机区，等你把宿主机目录挂载到 <code>/opt/video</code>，
                  它就会在播放列表里闪亮登场。
                </figcaption>
              </figure>
            </article>

            <article id="moment-2024-01" class="timeline__panel" aria-hidden="true">
              <figure class="timeline__figure">
                <img
                  src="{{ url_for('static', filename='img/timeline/2024-01-terminal.svg') }}"
                  alt="2024年1月31日航站楼指引牌的照片"
                />
                <figcaption>在航站楼的指示牌下，我们向彼此挥手，知道前行的路上依然同行。</figcaption>
              </figure>
            </article>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>💌 留言时间</h2>
        <p>
          留下此刻的感受吧！留言内容不会在页面上显示，但我们会把它安全地保存到宿主机指定的目录中。
        </p>
        <form id="guestbook-form" class="form">
          <label class="label" for="name">称呼（可选）</label>
          <input id="name" name="name" class="input" maxlength="80" placeholder="比如：小葡萄" />

          <label class="label" for="message">留言内容</label>
          <textarea
            id="message"
            name="message"
            class="textarea"
            maxlength="500"
            placeholder="这一刻想说的话..."
            required
          ></textarea>

          <button type="submit" class="button">送出温暖</button>
        </form>
        <div id="guestbook-feedback" class="feedback" role="status" aria-live="polite"></div>
        <p class="hint">
          日志文件会写入 <code>/etc/data/messages.log</code>。在宿主机上挂载例如
          <code>-v /var/nextchat:/etc/data</code> 即可查看。
        </p>
      </section>
    </main>

    <footer class="footer">
      <p>期待下一次的相聚。容器默认监听 1206 端口，祝您使用愉快！</p>
    </footer>
  </body>
</html>
